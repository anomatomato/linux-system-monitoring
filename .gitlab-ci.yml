default:
  image: gcc:latest #arm32v7/debian:latest # Simulate an ARM environment similar to Raspberry Pi OS Lite.
  before_script:
    - apt-get update -qq && apt-get install -y cmake libsensors4-dev

stages:
  - build

build:
    stage: build
    allow_failure: false
    when: always
    only:
      changes:
        - ./**/*
        - .gitlab-ci.yml
    script:
      - mkdir -p build && cd build
      - cmake ..
      - make
    artifacts:
      paths:
          - build/
      expire_in: 1 week

cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - build/